<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: AgnosticLP Content</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">AgnosticLP Content</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="agnosticlp-content" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="overview.html">Agnosticlp Content</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="#index.adoc">Lab Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="user_information.html">Information about your environment</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="run_jenkins_pipeline.html">Execute Jenkins pipeline</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="create_tekton_pipeline.html">Create OpenShift pipeline</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="test_tekton_tasks.html">Test OpenShift pipeline tasks</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="run_tekton_pipeline.html">Run OpenShift pipeline</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="add_webhook.html">Add Webhook</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Agnosticlp Content</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="overview.html">Agnosticlp Content</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="overview.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="overview.html">Agnosticlp Content</a></li>
    <li><a href="create_tekton_pipeline.html">Create OpenShift pipeline</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<article class="doc">
<div class="paragraph">
<p>OpenShift Pipelines is a cloud-native, continuous integration and delivery (CI/CD) solution for building pipelines using <a href="https://tekton.dev/">Tekton</a>. Tekton is a flexible, Kubernetes-native, open-source CI/CD framework that enables automating deployments across multiple platforms (Kubernetes, serverless, VMs, etc) by abstracting away the underlying details.</p>
</div>
<div class="sect1">
<h2 id="_understanding_openshift_pipelines"><a class="anchor" href="#_understanding_openshift_pipelines"></a>Understanding OpenShift Pipelines</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tekton defines a number of <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/">Kubernetes custom resources</a> as building blocks in order to standardize pipeline concepts and provide a terminology that is consistent across CI/CD solutions.</p>
</div>
<div class="paragraph">
<p>The custom resources needed to define a pipeline are listed below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Task</strong>: a reusable, loosely coupled number of steps that perform a specific task (e.g. building a container image). Tasks get executes as Kubernetes Pods while steps in a task map onto containers</p>
</li>
<li>
<p><strong>Pipeline</strong>: the definition of the pipeline and the Tasks that it should perform</p>
</li>
<li>
<p><strong>TaskRun</strong>: the execution and result of running an instance of task</p>
</li>
<li>
<p><strong>PipelineRun</strong>: the execution and result of running an instance of pipeline, which includes a number of TaskRuns</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/openshift/pipelines-tutorial/master/docs/images/tekton-architecture.svg" alt="Tekton Architecture">
</div>
</div>
<div class="paragraph">
<p>In short, in order to create a pipeline, one does the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create custom or install <a href="https://github.com/tektoncd/catalog">existing</a> reusable <code>Tasks</code></p>
</li>
<li>
<p>Create a <code>Pipeline</code> and <code>PipelineResources</code> to define your application&#8217;s delivery pipeline</p>
</li>
<li>
<p>Create a <code>PersistentVolumeClaim</code> to provide the volume/filesystem for pipeline execution or provide a <code>VolumeClaimTemplate</code> which creates a <code>PersistentVolumeClaim</code></p>
</li>
<li>
<p>Create a <code>PipelineRun</code> to instantiate and invoke the pipeline</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For further details on pipeline concepts, refer to the <a href="https://github.com/tektoncd/pipeline/tree/master/docs#learn-more">Tekton documentation</a> which provides an excellent guide for understanding various parameters and attributes available for defining pipelines.</p>
</div>
<div class="paragraph">
<p>OpenShift Pipelines are already installed in this cluster using the OpenShift Pipeline Operator.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_convert_the_jenkins_pipeline_into_a_tekton_pipeline"><a class="anchor" href="#_convert_the_jenkins_pipeline_into_a_tekton_pipeline"></a>Convert the Jenkins pipeline into a Tekton pipeline</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this chapter you will convert the Groovy Jenkins pipeline that you executed in the previous chapter, into a Kubernetes-native YAML Tekton pipeline.</p>
</div>
<div class="paragraph">
<p>In order to achieve that, you will refactor all the steps from our original Pipeline into a new list of steps that better fit into a Tekton pipeline.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/images/jenkins_to_tekton_diagram.png" alt="Jenkins to Tekton">
</div>
</div>
<div class="sect2">
<h3 id="_stages_to_tasks"><a class="anchor" href="#_stages_to_tasks"></a>Stages to Tasks</h3>
<div class="paragraph">
<p>All Jenkins <strong>Stages</strong> will be converted into Tekton <strong>Tasks</strong> or <strong>ClusterTasks</strong>. A ClusterTask is a Tekton task that is available for the whole cluster. OpenShift Pipelines installs a number of useful ClusterTasks when it is installed.</p>
</div>
<div class="paragraph">
<p>You can verify the list of available reusable ClusterTasks:</p>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get clustertasks</code></pre>
</div>
</div>
<div class="paragraph">
<p>For this exercise, you will need two ClusterTasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>git-clone</strong>: downloads the source code from Git Repositories, we will use it for this purpose with our private Git Repository from Gitea</p>
</li>
<li>
<p><strong>maven</strong>: performs Maven builds with target Maven goals, we will use it to run our builds and tests with Maven</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All the other <strong>Stages</strong> will be converted with custom <strong>Tasks</strong> that you are going to define now:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>s2i-java-11-binary-namespace</strong>: a Task to build a container image from the artifact generated by a previous Maven ClusterTask, and then push it to a target namespace. For our purpose we need to push it to a <em>dev</em> and a <em>prod</em> project like before.</p>
</li>
<li>
<p><strong>promote-to-prod</strong>: a Task to tag our <em>dev</em> image to <em>prod</em> thus promoting it to the <em>prod</em> project</p>
</li>
<li>
<p><strong>deploy-to-project</strong>: a Task to deploy an existing container image to a target project. We will use it to deploy the app to our <em>dev</em> and <em>prod</em> environments</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure you use the pipeline project <strong>pipeline-%guid%</strong>:</p>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc project pipeline-%guid%</code></pre>
</div>
</div>
</li>
<li>
<p>Create the three tasks:</p>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc create -f https://raw.githubusercontent.com/redhat-gpte-labs/rhtr2020_pipelines/master/workshop/content/tekton/tasks/s2i-java-11-binary-ns.yaml -n pipeline-%guid%</code></pre>
</div>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc create -f https://raw.githubusercontent.com/redhat-gpte-labs/rhtr2020_pipelines/master/workshop/content/tekton/tasks/promote-to-project.yaml -n pipeline-%guid%</code></pre>
</div>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc create -f https://raw.githubusercontent.com/redhat-gpte-labs/rhtr2020_pipelines/master/workshop/content/tekton/tasks/deploy-to-project.yaml -n pipeline-%guid%</code></pre>
</div>
</div>
</li>
<li>
<p>Review the 3 tasks you just created:</p>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get tasks -n pipeline-%guid%</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code>NAME                           AGE
deploy-to-project              2s
promote-to-prod                5s
s2i-java-11-binary-namespace   7s</code></pre>
</div>
</div>
</li>
<li>
<p>Examine these tasks. You can do this either from the <a href="%web_console_url%/search/ns/pipeline-%guid%?kind=tekton.dev~v1beta1~Task">Web Console</a> (this link will only work if you are already logged into the Web Console) or via the command line. Take some time to understand the various properties and settings in each task.</p>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get task s2i-java-11-binary-namespace -o yaml -n pipeline-%guid%</code></pre>
</div>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get task promote-to-prod -o yaml -n pipeline-%guid%</code></pre>
</div>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get task deploy-to-project -o yaml -n pipeline-%guid%</code></pre>
</div>
</div>
</li>
<li>
<p>You can also examine the the <strong>ClusterTasks</strong>:</p>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get clustertasks git-clone -o yaml -n pipeline-%guid%</code></pre>
</div>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get clustertasks maven -o yaml -n pipeline-%guid%</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_persistence_for_openshift_pipelines"><a class="anchor" href="#_persistence_for_openshift_pipelines"></a>Persistence for OpenShift pipelines</h3>
<div class="paragraph">
<p>Tekton <strong>Workspaces</strong> allow you to specify one or more volumes that each Task in a Pipeline can use during execution. In our case, we need persistency between Tasks to share our workspace. The first task clones the source code repository into the workspace, the second task builds the Java artifacts from the cloned repo and so forth.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a persistent volume claim called <strong>app-source</strong> to use as the Workspace:</p>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc create -f https://raw.githubusercontent.com/redhat-gpte-labs/rhtr2020_pipelines/master/workshop/content/tekton/pvc/workspace-pvc.yaml -n pipeline-%guid%</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_create_the_openshift_pipeline"><a class="anchor" href="#_create_the_openshift_pipeline"></a>Create the OpenShift pipeline</h3>
<div class="paragraph">
<p>Now that you have all prerequisites in place you can create the Tekton pipeline.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Review the Pipeline YAML definition:</p>
<div class="listingblock copypaste">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: petclinic-pipeline
spec:
  params:
  - default: petclinic
    description: The application deployment name
    name: APP_NAME
    type: string
  - default: &gt;-
      %gitea_url%
    description: The application git repository url
    name: APP_GIT_URL
    type: string
  - default: main
    description: The application git repository revision
    name: APP_GIT_REVISION
    type: string
  - default: 'petclinic:latest'
    description: The application image stream
    name: APP_IMAGE_STREAM
    type: string
  - default: petclinic-%guid%-dev
    name: DEV_NAMESPACE
    type: string
  - default: petclinic-%guid%-prod
    name: PROD_NAMESPACE
    type: string
  - default: http://nexus.nexus.svc:8081/repository/maven-all-public/
    name: MAVEN_MIRROR_URL
    type: string

  tasks:
  - name: git-clone
    params:
    - name: url
      value: $(params.APP_GIT_URL)
    - name: revision
      value: $(params.APP_GIT_REVISION)
    - name: deleteExisting
      value: 'true'
    taskRef:
      kind: ClusterTask
      name: git-clone
    workspaces:
    - name: output
      workspace: app-source

  - name: build
    params:
    - name: GOALS
      value:
      - -DskipTests
      - clean
      - package
    - name: MAVEN_MIRROR_URL
      value: $(params.MAVEN_MIRROR_URL)
    runAfter:
    - git-clone
    taskRef:
      kind: ClusterTask
      name: maven
    workspaces:
    - name: source
      workspace: app-source
    - name: maven-settings
      workspace: maven-settings

  - name: run-test
    params:
    - name: GOALS
      value:
      - test
    - name: MAVEN_MIRROR_URL
      value: $(params.MAVEN_MIRROR_URL)
    runAfter:
    - build
    taskRef:
      kind: ClusterTask
      name: maven
    workspaces:
    - name: source
      workspace: app-source
    - name: maven-settings
      workspace: maven-settings

  - name: build-image
    params:
    - name: TLSVERIFY
      value: 'false'
    - name: OUTPUT_IMAGE_STREAM
      value: $(params.APP_IMAGE_STREAM)
    - name: NAMESPACE
      value: $(params.DEV_NAMESPACE)
    runAfter:
    - run-test
    taskRef:
      kind: Task
      name: s2i-java-11-binary-namespace
    workspaces:
    - name: source
      workspace: app-source
  - name: deploy-to-dev
    params:
    - name: DEPLOYMENT
      value: $(params.APP_NAME)
    - name: IMAGE_STREAM
      value: $(params.APP_IMAGE_STREAM)
    - name: NAMESPACE
      value: $(params.DEV_NAMESPACE)
    runAfter:
    - build-image
    taskRef:
      kind: Task
      name: deploy-to-project

  - name: promote-to-prod
    params:
    - name: IMAGE_STREAM
      value: $(params.APP_IMAGE_STREAM)
    - name: DEPLOYMENT
      value: $(params.APP_NAME)
    - name: DEV_NAMESPACE
      value: $(params.DEV_NAMESPACE)
    - name: PROD_NAMESPACE
      value: $(params.PROD_NAMESPACE)
    runAfter:
    - deploy-to-dev
    taskRef:
      kind: Task
      name: promote-to-prod

  - name: deploy-to-prod
    params:
    - name: DEPLOYMENT
      value: $(params.APP_NAME)
    - name: IMAGE_STREAM
      value: '$(params.APP_NAME):prod'
    - name: NAMESPACE
      value: $(params.PROD_NAMESPACE)
    runAfter:
    - promote-to-prod
    taskRef:
      kind: Task
      name: deploy-to-project

  workspaces:
  - name: app-source
  - name: maven-settings</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you observe the YAML manifest, you will see that Tekton pipelines accept parameters - just like Jenkins pipelines - then define all required steps as a sequence of tasks to run. Those steps can be executed sequentially or in parallel, and they can share some storage defined as <code>Workspace</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
One big difference between Jenkins and Tekton pipelines is the agent/executor. In Jenkins it&#8217;s just one pod, scheduled by the Kubernetes plugin, executing all the steps. In Tekton, being a native extension of Kubernetes, there are many pods involved in the setup/execution. Each task, within the same Pipeline, is executed by a different pod - and each <strong>step</strong> in a task is executed in its own container. That&#8217;s why we need a shared volume to let the <code>git-clone</code> task share data with the <code>maven</code> and subsequent tasks.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Now you can create the Pipeline inside the pipeline-%guid% project. You can do either from the %web_console_url%[Web Console] pasting the above YAML content (left-side menu <strong>Add+</strong> &#8594; <strong>YAML</strong>), or directly from the terminal:</p>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cat &lt;&lt;'EOF' | oc apply -n pipeline-%guid% -f -
apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: petclinic-pipeline
spec:
  params:
  - default: petclinic
    description: The application deployment name
    name: APP_NAME
    type: string
  - default: &gt;-
      %gitea_url%
    description: The application git repository url
    name: APP_GIT_URL
    type: string
  - default: main
    description: The application git repository revision
    name: APP_GIT_REVISION
    type: string
  - default: 'petclinic:latest'
    description: The application image stream
    name: APP_IMAGE_STREAM
    type: string
  - default: petclinic-%guid%-dev
    name: DEV_NAMESPACE
    type: string
  - default: petclinic-%guid%-prod
    name: PROD_NAMESPACE
    type: string
  - default: http://nexus.nexus.svc:8081/repository/maven-all-public/
    name: MAVEN_MIRROR_URL
    type: string

  tasks:
  - name: git-clone
    params:
    - name: url
      value: $(params.APP_GIT_URL)
    - name: revision
      value: $(params.APP_GIT_REVISION)
    - name: deleteExisting
      value: 'true'
    taskRef:
      kind: ClusterTask
      name: git-clone
    workspaces:
    - name: output
      workspace: app-source

  - name: build
    params:
    - name: GOALS
      value:
      - -DskipTests
      - clean
      - package
    - name: MAVEN_MIRROR_URL
      value: $(params.MAVEN_MIRROR_URL)
    runAfter:
    - git-clone
    taskRef:
      kind: ClusterTask
      name: maven
    workspaces:
    - name: source
      workspace: app-source
    - name: maven-settings
      workspace: maven-settings

  - name: run-test
    params:
    - name: GOALS
      value:
      - test
    - name: MAVEN_MIRROR_URL
      value: $(params.MAVEN_MIRROR_URL)
    runAfter:
    - build
    taskRef:
      kind: ClusterTask
      name: maven
    workspaces:
    - name: source
      workspace: app-source
    - name: maven-settings
      workspace: maven-settings

  - name: build-image
    params:
    - name: TLSVERIFY
      value: 'false'
    - name: OUTPUT_IMAGE_STREAM
      value: $(params.APP_IMAGE_STREAM)
    - name: NAMESPACE
      value: $(params.DEV_NAMESPACE)
    runAfter:
    - run-test
    taskRef:
      kind: Task
      name: s2i-java-11-binary-namespace
    workspaces:
    - name: source
      workspace: app-source
  - name: deploy-to-dev
    params:
    - name: DEPLOYMENT
      value: $(params.APP_NAME)
    - name: IMAGE_STREAM
      value: $(params.APP_IMAGE_STREAM)
    - name: NAMESPACE
      value: $(params.DEV_NAMESPACE)
    runAfter:
    - build-image
    taskRef:
      kind: Task
      name: deploy-to-project

  - name: promote-to-prod
    params:
    - name: IMAGE_STREAM
      value: $(params.APP_IMAGE_STREAM)
    - name: DEPLOYMENT
      value: $(params.APP_NAME)
    - name: DEV_NAMESPACE
      value: $(params.DEV_NAMESPACE)
    - name: PROD_NAMESPACE
      value: $(params.PROD_NAMESPACE)
    runAfter:
    - deploy-to-dev
    taskRef:
      kind: Task
      name: promote-to-prod

  - name: deploy-to-prod
    params:
    - name: DEPLOYMENT
      value: $(params.APP_NAME)
    - name: IMAGE_STREAM
      value: '$(params.APP_NAME):prod'
    - name: NAMESPACE
      value: $(params.PROD_NAMESPACE)
    runAfter:
    - promote-to-prod
    taskRef:
      kind: Task
      name: deploy-to-project

  workspaces:
  - name: app-source
  - name: maven-settings
EOF</code></pre>
</div>
</div>
</li>
<li>
<p>Review the pipeline from %web_console_url%[Web Console]:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Toggle <strong>Developer Perspective</strong></p>
</li>
<li>
<p>Select your project <strong>pipeline-%guid%</strong></p>
</li>
<li>
<p>Go to left-side menu, click <strong>Pipelines</strong> and you should see a new pipeline named <strong>petclinic-pipeline</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="_images/images/pipeline_overview.png" alt="Pipeline Overview">
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Verify that the pipeline exists also from the command line:</p>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get pipeline -n pipeline-%guid%</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_tkn_the_tekton_cli"><a class="anchor" href="#_tkn_the_tekton_cli"></a>tkn: The Tekton CLI</h3>
<div class="paragraph">
<p>Tekton has its own CLI for managing pipelines. This allows the developer to use the pipelines abstractions rather than having to be aware of pods and containers.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Examine the Tekton CLI version:</p>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">tkn version</code></pre>
</div>
</div>
</li>
<li>
<p>List currently available pipelines:</p>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">tkn pipeline ls -n pipeline-%guid%</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-texinfo hljs" data-lang="texinfo">NAME                 AGE              LAST RUN   STARTED   DURATION   STATUS
petclinic-pipeline   58 seconds ago   ---        ---       ---        ---</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
